<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Load Balancing</title>
  </head>
  <body>
    <div>
      <h2>Load balancing</h2>
      <p>
        Load balancers are servers that forward internet traffic to multiple
        servers.
      </p>
      <p>
        For example one user tries to access the application and is forwarded to
        the one EC2 instance, then another user Tries to access the application
        and is forwarded to the second EC2 instance.
      </p>
      <p>EBS (Elastic Load Balancer) is load balancer managed by AWS.</p>
    </div>
    <div>
      <h3>Stickiness</h3>
      <p>
        Stickiness for load balancers means that the same client is always
        redirected to the same EC2 instance.
      </p>
      <p>
        Stickiness works for Classic Load Balancer and Application Load Balancer
      </p>
      <p>Stickiness uses a cookie which has expiration date</p>
      <p>
        Use case to use stickiness is for example to keep the user's session.
      </p>
    </div>
    <hr />
    <div>
      <h3>Load balancer types</h3>
      <ul>
        <li>Classic Load Balancer</li>
        <li>Application Load Balancer</li>
        <li>Network Load Balancer</li>
        <li>Gateway Load Balancer</li>
      </ul>
      <p>
        Click
        <a
          href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/load-balancer-types.html"
          target="_blank"
          >here</a
        >
        for more info..
      </p>
      <div>
        <h4>Classic Load Balancer</h4>
        <ul>
          <li>Legacy load balancer, it is already deprecated.</li>
        </ul>
      </div>
      <div>
        <h4>Application Load Balancer (Layer 7)</h4>
        <ul>
          <li>Forward HTTP and HTTPS traffic</li>
          <li>Routing based on path, hostname or query url</li>
        </ul>
      </div>
      <div>
        <h4>Network Load Balancer (Layer 4)</h4>
        <ul>
          <li>Forward TCP and UDP traffic</li>
          <li>
            Extreme performance, millions of requests per second with low
            latency
          </li>
        </ul>
      </div>
      <div>
        <h4>Gateway Load Balancer (Layer 3)</h4>
      </div>
      <div>
        <h4>Additional load balancers info</h4>
        <p>
          The user public IP will not be used by the load balancer. The LB will
          go to the EC2 instance with the private IP. If we are still interested
          in the user's IP we can check the header <b>X-Forwarded-For</b>.
        </p>
      </div>
    </div>
    <hr />
    <div>
      <h3>Health Checks</h3>
      <p>
        Load balancing are first checking if the EC2 instance is healthy and if
        it is not they will not send the traffic to it.
      </p>
    </div>
    <div>
      <h3>Loab balancer Security groups</h3>
      <p>
        In general if we have load balancers directing traffic to EC2 instances
        we would make our EC2 instances security groups to allow only traffic
        from the load balancer security group and not some IPs for example.
      </p>
    </div>
    <div>
      <h3>Connection Draining / Deregistration Delay</h3>
      <p>
        Deregistration delay is the time when our EC2 instance is marked as
        unhealthy, but there are still sent requests to the instance.
      </p>
      <p>
        The default time is 300 seconds to stop sending requests to the
        deregistering instance.
      </p>
    </div>
    <hr />
    <div>
      <h3>Sticky Sessions</h3>
      <p>
        Stickiness is the possibility of the load balancer to always redirect
        the same client to the same instance.
      </p>
      <p>It is implemented with the help of a cookie.</p>
    </div>
  </body>
</html>
